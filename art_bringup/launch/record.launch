<?xml version="1.0"?>
<launch>

    <arg name="fps" default="5"/>
    <arg name="pr2_kinect" default="true"/>
    <arg name="n1_kinect" default="true"/>
    <arg name="n2_kinect" default="true"/>
    <arg name="quality" default="qhd"/>
    <arg name="topics" default=""/>

    <group if="$(arg pr2_kinect)">
        <node pkg="image_transport" name="republish1" type="republish" args="raw in:=/pr2_kinect/image_throttled theora out:=/pr2_kinect/image" >

        </node>
        <node pkg="topic_tools" name="throttle1" type="throttle" args="messages /kinect_head/rgb/image_color $(arg fps) /pr2_kinect/image_throttled" >

        </node>
    </group>
    <group if="$(arg n1_kinect)">
         <node pkg="image_transport" name="republish2" type="republish" args="raw in:=/n1_kinect/image_throttled out:=/n1_kinect/image" >

        </node>
        <node pkg="topic_tools" name="throttle2" type="throttle" args="messages /art/n1/kinect2/$(arg quality)/image_color_rect $(arg fps) /n1_kinect/image_throttled" >

        </node>
    </group>

    <group if="$(arg n2_kinect)">
         <node pkg="image_transport" name="republish3" type="republish" args="raw in:=/n2_kinect/image_throttled theora out:=/n2_kinect/image" >

        </node>
        <node pkg="topic_tools" name="throttle3" type="throttle" args="messages /art/n2/kinect2/$(arg quality)/image_color_rect $(arg fps) /n2_kinect/image_throttled" >

        </node>
    </group>

    <node pkg="rosbag" type="record" name="rosbag_record_cam"
       args="-o /home/dev/bag/ /pr2_kinect/image/theora /n1_kinect/image/theora /n2_kinect/image/theora /art/interface/state $(arg topics)" output="screen"/>


</launch>
